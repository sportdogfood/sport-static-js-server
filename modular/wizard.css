:root {
  --bg:#111315; --fg:#f1f1f1; --muted:#a0a0a0;
  --bar:#2d2f33; --card:#1c1f22; --accent:#2b5cff;
  --radius:26px; font-family:system-ui,"Segoe UI",sans-serif;
}

/* Lock background scroll */
html.modal-open, body.modal-open {
  overflow:hidden; position:fixed; width:100%; height:100%;
}

/* Overlay + animation */
.chat-wizard {
  position:fixed; inset:0;
  background:var(--bg);
  transform:translateY(100%);
  opacity:0;
  display:flex; justify-content:center; align-items:flex-end;
  transition:transform .4s cubic-bezier(.22,1,.36,1), opacity .4s ease-in-out;
  pointer-events:none; z-index:1000;
}
.chat-wizard.active {
  transform:translateY(0);
  opacity:1;
  pointer-events:all;
}

/* Container sizing */
.wizard-container {
  width:100%; max-width:900px;
  height:100%; max-height:600px;
  display:flex; flex-direction:column;
  background:var(--bg);
}

/* Header */
.chat-header {
  position:sticky; top:0;
  display:flex; align-items:center; justify-content:center;
  padding:16px 24px; background:var(--bg);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.wizard-title { flex:1; text-align:center; }
.chat-header h2 {
  margin:0; font-size:clamp(20px,4vw,32px); color:var(--fg);
}
.chat-header .icon-btn {
  background:none; border:none; color:var(--fg);
  font-size:24px; cursor:pointer;
}

/* Thread + bubbles */
.chat-thread, .chat-messages {
  flex:1; overflow-y:auto;
  padding:12px 24px;
  display:flex; flex-direction:column; gap:14px;
}
.chat-msg {
  max-width:78%; padding:14px 18px; border-radius:18px;
  line-height:1.4; font-size:16px;
  background:var(--card); color:var(--fg);
  box-shadow:0 0 0 1px rgba(255,255,255,.05) inset;
  word-wrap:break-word;
}
.messagex-user {
  background:var(--accent); color:#fff;
  margin-left:auto; border-bottom-right-radius:6px;
}
.messagex-bot {
  border-bottom-left-radius:6px; margin-right:auto;
}
/* Typing indicator */
.typing {
  width:46px; height:20px;
  display:flex; gap:4px; align-items:center; justify-content:center;
}
.typing span {
  width:6px; height:6px; border-radius:50%; background:var(--muted);
  animation:blink 1s infinite ease-in-out;
}
@keyframes blink {
  0%,80%,100%{opacity:.2;transform:translateY(0)}
  40%{opacity:1;transform:translateY(-3px)}
}
/* Error shake */
@keyframes shake {
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-4px)}
}
.shake { animation:shake .3s; }

/* Input bar */
.copilot-search {
  display:flex; align-items:center; gap:14px;
  background:var(--bar); border-radius:var(--radius);
  padding:14px 16px;
  box-shadow:0 0 0 1px rgba(255,255,255,.05) inset;
}
.copilot-input {
  flex:1; background:transparent; border:none;
  color:var(--fg); font-size:18px; outline:none;
}
.icon-btn {
  background:transparent; border:none; color:var(--fg);
  cursor:pointer; padding:0;
  display:flex; align-items:center; justify-content:center;
  transition:opacity .18s;
}
.icon-btn:hover { opacity:.85; }
.send-btn {
  background:var(--accent); color:#fff;
  padding:6px; border-radius:50%; font-weight:600;
  margin-left:auto;
}

/* Close success */
.success-close {
  background:var(--accent); color:#fff; border:none;
  padding:4px 8px; border-radius:4px;
  margin-left:8px; cursor:pointer;
}
